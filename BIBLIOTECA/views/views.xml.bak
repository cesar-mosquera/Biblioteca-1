<?xml version="1.0" encoding="utf-8"?>
<odoo>

  <!-- ====== LIBROS: VISTAS ====== -->
  <record id="view_biblioteca_libro_list" model="ir.ui.view">
    <field name="name">biblioteca.libro.list</field>
    <field name="model">biblioteca.libro</field>
    <field name="arch" type="xml">
      <list string="Libros">
        <field name="titulo"/>
        <field name="author_id"/>
        <field name="isbn"/>
        <field name="genero"/>
        <field name="genero_id"/>
        <field name="anio_pub"/>
        <field name="editorial_id"/>
        <field name="numero"/>
        <field name="estado"/>
        <field name="costo"/>
        <field name="ubicacion_id"/>
      </list>
    </field>
  </record>

  <record id="view_biblioteca_libro_form" model="ir.ui.view">
    <field name="name">biblioteca.libro.form</field>
    <field name="model">biblioteca.libro</field>
    <field name="arch" type="xml">
      <form string="Libro">
        <sheet>
          <group>
            <group>
              <field name="titulo"/>
              <field name="author_id"/>
              <field name="isbn"/>
              <field name="genero"/>
              <field name="genero_id"/>
              <field name="anio_pub"/>
            </group>
            <group>
              <field name="editorial_id"/>
              <field name="numero"/>
              <field name="estado"/>
              <field name="ejemplares"/>
              <field name="costo" readonly="1"/>
              <field name="ubicacion_id"/>
            </group>
          </group>
          <notebook>
            <page string="Resumen">
              <field name="resumen"/>
            </page>
          </notebook>
        </sheet>
      </form>
    </field>
  </record>

  <record id="view_biblioteca_libro_search" model="ir.ui.view">
    <field name="name">biblioteca.libro.search</field>
    <field name="model">biblioteca.libro</field>
    <field name="arch" type="xml">
      <search string="Buscar...">
        <field name="titulo"/>
        <field name="author_id"/>
        <field name="isbn"/>
        <field name="genero"/>
        <field name="genero_id"/>
        <group expand="0" string="Agrupar por">
          <filter string="Autor" name="grp_autor" context="{'group_by':'author_id'}"/>
          <filter string="Género (cat.)" name="grp_genero_id" context="{'group_by':'genero_id'}"/>
          <filter string="Año" name="grp_anio" context="{'group_by':'anio_pub'}"/>
        </group>
      </search>
    </field>
  </record>

  <!-- ====== ACCIÓN PRINCIPAL LIBROS ====== -->
  <record id="action_biblioteca_libro" model="ir.actions.act_window">
    <field name="name">Libros</field>
    <field name="res_model">biblioteca.libro</field>
    <field name="view_mode">list,form</field>
    <field name="search_view_id" ref="view_biblioteca_libro_search"/>
  </record>

  <!-- ====== EDITORIALES ====== -->
  <record id="view_biblioteca_editorial_list" model="ir.ui.view">
    <field name="name">biblioteca.editorial.list</field>
    <field name="model">biblioteca.editorial</field>
    <field name="arch" type="xml">
      <list string="Editoriales">
        <field name="name"/>
        <field name="active"/>
      </list>
    </field>
  </record>

  <record id="view_biblioteca_editorial_form" model="ir.ui.view">
    <field name="name">biblioteca.editorial.form</field>
    <field name="model">biblioteca.editorial</field>
    <field name="arch" type="xml">
      <form string="Editorial">
        <sheet>
          <group>
            <field name="name"/>
            <field name="active"/>
          </group>
        </sheet>
      </form>
    </field>
  </record>

  <record id="action_biblioteca_editorial" model="ir.actions.act_window">
    <field name="name">Editoriales</field>
    <field name="res_model">biblioteca.editorial</field>
    <field name="view_mode">list,form</field>
  </record>

  <!-- ====== GÉNEROS ====== -->
  <record id="view_biblioteca_genero_list" model="ir.ui.view">
    <field name="name">biblioteca.genero.list</field>
    <field name="model">biblioteca.genero</field>
    <field name="arch" type="xml">
      <list string="Géneros">
        <field name="name"/>
        <field name="active"/>
      </list>
    </field>
  </record>

  <record id="view_biblioteca_genero_form" model="ir.ui.view">
    <field name="name">biblioteca.genero.form</field>
    <field name="model">biblioteca.genero</field>
    <field name="arch" type="xml">
      <form string="Género">
        <sheet>
          <group>
            <field name="name"/>
            <field name="active"/>
          </group>
        </sheet>
      </form>
    </field>
  </record>

  <record id="action_biblioteca_genero" model="ir.actions.act_window">
    <field name="name">Géneros</field>
    <field name="res_model">biblioteca.genero</field>
    <field name="view_mode">list,form</field>
  </record>

  <!-- ====== UBICACIONES ====== -->
  <record id="view_biblioteca_ubicacion_list" model="ir.ui.view">
    <field name="name">biblioteca.ubicacion.list</field>
    <field name="model">biblioteca.ubicacion</field>
    <field name="arch" type="xml">
      <list string="Ubicaciones">
        <field name="name"/>
        <field name="active"/>
      </list>
    </field>
  </record>

  <record id="view_biblioteca_ubicacion_form" model="ir.ui.view">
    <field name="name">biblioteca.ubicacion.form</field>
    <field name="model">biblioteca.ubicacion</field>
    <field name="arch" type="xml">
      <form string="Ubicación">
        <sheet>
          <group>
            <field name="name"/>
            <field name="active"/>
          </group>
        </sheet>
      </form>
    </field>
  </record>

  <record id="action_biblioteca_ubicacion" model="ir.actions.act_window">
    <field name="name">Ubicaciones</field>
    <field name="res_model">biblioteca.ubicacion</field>
    <field name="view_mode">list,form</field>
  </record>

  <!-- ====== MENÚS ====== -->
  <menuitem id="menu_biblioteca_root" name="Biblioteca" sequence="10"/>
  <menuitem id="menu_biblioteca_libros" name="Libros"
            parent="menu_biblioteca_root" action="action_biblioteca_libro" sequence="20"/>
  <menuitem id="menu_biblioteca_editoriales" name="Editoriales"
            parent="menu_biblioteca_root" action="action_biblioteca_editorial" sequence="30"/>
  <menuitem id="menu_biblioteca_generos" name="Géneros"
            parent="menu_biblioteca_root" action="action_biblioteca_genero" sequence="40"/>
  <menuitem id="menu_biblioteca_ubicaciones" name="Ubicaciones"
            parent="menu_biblioteca_root" action="action_biblioteca_ubicacion" sequence="50"/>
<odoo>
  <!-- tus menús arriba -->
  
  <!-- FORM AUTOR -->
  <record id="view_biblioteca_autor_form" model="ir.ui.view">
    <field name="name">biblioteca.autor.form</field>
    <field name="model">biblioteca.autor</field>
    <field name="arch" type="xml">
      <form string="Autor">
        <sheet>
          <group>
            <field name="firstname"/>
            <field name="lastname"/>
          </group>
          <group>
            <field name="libros" context="{'default_author_id': active_id}"/>

            <field name="libros_autores" widget="many2many_tags"/>
          </group>
        </sheet>
      </form>
    </field>
  </record>

  <!-- FORM LIBRO -->
  <record id="view_biblioteca_libro_form" model="ir.ui.view">
    <field name="name">biblioteca.libro.form</field>
    <field name="model">biblioteca.libro</field>
    <field name="arch" type="xml">
      <form string="Libro">
        <sheet>
          <group>
            <field name="titulo"/>
            <field name="author_id"/>
            <field name="autores" widget="many2many_tags"/>
            <field name="isbn"/>
            <field name="genero"/>
          </group>
          <group>
            <field name="descripcion"/>
          </group>
        </sheet>
      </form>
    </field>
  </record>
<!-- ================= MENÚS Y ACCIONES ================= -->

<!-- Acción de vista para Autores -->
<record id="action_biblioteca_autor" model="ir.actions.act_window">
  <field name="name">Autores</field>
  <field name="res_model">biblioteca.autor</field>
  <field name="view_mode">tree,form</field>
</record>

<!-- Acción de vista para Libros -->
<record id="action_biblioteca_libro" model="ir.actions.act_window">
  <field name="name">Libros</field>
  <field name="res_model">biblioteca.libro</field>
  <field name="view_mode">tree,form</field>
</record>

<!-- Menú raíz principal -->
<menuitem id="menu_biblioteca_root" name="Biblioteca" sequence="10"/>

<!-- Submenús -->
<menuitem id="menu_biblioteca_autores" name="Autores"
          parent="menu_biblioteca_root" action="action_biblioteca_autor" sequence="10"/>

<menuitem id="menu_biblioteca_libros" name="Libros"
          parent="menu_biblioteca_root" action="action_biblioteca_libro" sequence="20"/>

</odoo>

